function ViewMenu(m){var a={};a.level=m;a.viewList=[];a.selectedTrackSetting=0;a.previewLevel=100;a.previewSVG=NaN;a.curOrg=(new String(organism)).toUpperCase();a.initialized=0;a.generatePreview=function(b){$("div#previewOuter"+a.level+" div#previewContent").html("");var d=(new String(organism)).toUpperCase();if("AA"===b.Organism||b.Organism===d){d=svgList[a.level].xScale.domain()[0];var c=svgList[a.level].xScale.domain()[1];a.previewSVG=toolTipSVG("div#previewOuter"+a.level+" div#previewContent",
555,d,c,a.previewLevel,chr,svgList[a.level].type);$("div#ScrollLevel"+a.previewLevel).css("overflow","auto").css("max-height","360px");if(b=a.generateSettingsString(b))loadStateFromString(b,"",a.previewLevel,a.previewSVG),a.previewSVG.updateData(),a.previewSVG.updateFullData()}else $("div#previewOuter"+a.level+" div#previewContent").html("No Preview Available: The current organism doesn't match the tracks included in this view.")};a.removeTrackWithID=function(b){b=a.findTrackIndex(b);var d=a.findSelectedView().ViewID;
a.removeTrackWithIDIdx(b,d);ga&&ga("send","event","BrowserViews","deleteTrack")};a.removeTrackWithIDIdx=function(b,d){var c=a.findViewWithID(d),e=a.findViewIndexByID(d);"undefined"!==typeof c&&"undefined"!==typeof c.TrackList&&(c.TrackList.splice(b,1),a.generateTrackList(c),a.findSelectedView().modified=1,a.generateViewList(),a.generatePreview(c),$("#viewSelect"+a.level).prop("selectedIndex",e))};a.generateTrackList=function(b){var d=[];d3.select("table#trackListTbl"+a.level).select("tbody").selectAll("tr").remove();
if("undefined"!==typeof b.TrackList)for(var c=0;c<b.TrackList.length;c++)"AA"!==b.TrackList[c].Organism&&b.TrackList[c].Organism!==a.curOrg||d.push(b.TrackList[c]);d3.select("table#trackListTbl"+a.level).select("tbody").selectAll("tr").data(d).enter().append("tr").attr("class",function(a,c){return 0===c%2?"even":"odd"}).attr("id",function(a){return"trk"+a.TrackID}).each(function(c,d){var b='<img src="'+iconPath+'grab_flat.png" style="cursor: move; cursor: -webkit-grab; cursor: -moz-grab; " class="handle'+
a.level+'">';d3.select(this).append("td").attr("class","ind").html(b+(d+1));b='  <span class="listtooltip'+a.level+'" title= "'+c.Description+'"><img src="'+iconPath+'info.gif"></span>';d3.select(this).append("td").html(c.Name+b);b="";"AA"!==c.Organism&&(b=c.Organism,"RN"===b?b="Rat":"MM"===b&&(b="Mouse"),b+=" only");d3.select(this).append("td").html(b);b='<span class="moveUp'+a.level+'" name="'+c.TrackID+'" style="cursor:pointer;" ><img src="'+iconPath+'up_flat.png"></span>';b=b+' <span class="moveDown'+
a.level+'" name="'+c.TrackID+'" style="cursor:pointer;"><img src="'+iconPath+'down_flat.png"></span>';c.Controls&&5<c.Controls.length&&(b=b+'&nbsp&nbsp&nbsp<span class="trackSetting'+a.level+'" name="'+c.TrackID+'" style="cursor:pointer;"><img src="'+iconPath+'gear_flat.png"></span>');b=b+'&nbsp&nbsp&nbsp<span class="delete'+a.level+'" name="'+c.TrackID+'" style="cursor:pointer;"><img src="'+iconPath+'del_flat.png"></span>';d3.select(this).append("td").html(b);d3.select("table#trackListTbl"+a.level).selectAll(".trackSetting"+
a.level).on("click",function(){var b=d3.select(this).attr("name");b!==a.selectedTrackSetting?(a.previewSVG.getTrack(a.findTrack(b).TrackClass).generateSettingsDiv("div#trackSettingContent"),a.selectedTrackSetting=b,b=$(this).position(),$("#trackSettingDialog").css("top",b.top+240).css("left",$(window).width()-415),$("#trackSettingDialog").fadeIn("fast")):$("#trackSettingDialog").fadeOut("fast")}).on("mouseover",function(){$("#controlInfo"+a.level).html("Click to edit track settings.")}).on("mouseout",
function(){$("#controlInfo"+a.level).html("")});d3.select("table#trackListTbl"+a.level).selectAll(".moveUp"+a.level).on("click",function(){var b=$(this).attr("name");$("tr#trk"+b).insertBefore($("table#trackListTbl"+a.level+" tbody tr:first"));a.findSelectedView().modified=1;a.updateTrackNumber("",$("tr#trk"+b))}).on("mouseover",function(){$("#controlInfo"+a.level).html("Click to move the track to the top of the list.")}).on("mouseout",function(){$("#controlInfo"+a.level).html("")});d3.select("table#trackListTbl"+
a.level).selectAll(".moveDown"+a.level).on("click",function(){var b=$(this).attr("name");$("tr#trk"+b).insertAfter($("table#trackListTbl"+a.level+" tbody tr:last"));a.findSelectedView().modified=1;a.updateTrackNumber("",$("tr#trk"+b))}).on("mouseover",function(){$("#controlInfo"+a.level).html("Click to move the track to the end of the list.")}).on("mouseout",function(){$("#controlInfo"+a.level).html("")});d3.select("table#trackListTbl"+a.level).selectAll(".delete"+a.level).on("click",function(){var b=
d3.select(this).attr("name");a.removeTrackWithID(b)}).on("mouseover",function(){$("#controlInfo"+a.level).html("Click to remove the track from the view.")}).on("mouseout",function(){$("#controlInfo"+a.level).html("")})});$("#trackListTbl"+a.level+" tbody").sortable({handle:".handle"+a.level,stop:a.updateTrackNumber}).disableSelection();$(".listtooltip"+a.level).tooltipster({position:"top-right",maxWidth:250,offsetX:10,offsetY:5,contentAsHTML:!0,interactive:!0,interactiveTolerance:350});ga&&ga("send",
"event","BrowserViews","generateTrackList")};a.applyView=function(){var b=a.findSelectedView(),d=a.generateSettingStringFromUI();a.setupImage(d,b);$("div.viewsLevel"+a.level).hide();$("div.trackLevel"+a.level).hide();d=contextPath+"/"+pathPrefix;"db"===b.Source&&(pathPrefix||(d=""),$.ajax({url:d+"addBrowserCount.jsp",type:"GET",cache:!1,data:{viewID:b.ViewID},dataType:"json",success:function(a){},error:function(a,b,d){},async:!0}));ga&&ga("send","event","BrowserViews","applyView")};a.applySelectedView=
function(b){for(var d=NaN,c=-1,e=0;e<a.filterList.length&&isNaN(d);e++)a.filterList[e].ViewID===b&&(d=a.filterList[e],c=e);b=a.generateSettingStringFromView(d);a.setupImage(b,d);$("#viewSelect"+a.level).prop("selectedIndex",c);a.selectChange();ga&&ga("send","event","BrowserViews","applySelectedView")};a.setupImage=function(b,d){svgList[a.level].removeAllTracks();svgList[a.level].currentView=d;svgViewIDList[a.level]=d.ViewID;loadStateFromString(b,d.imgSettings,a.level,svgList[a.level]);$("span#viewLbl"+
a.level).html("View: "+d.Name);0===d.UserID?($("li#menusaveView"+a.level).addClass("ui-state-disabled"),$("li#menudeleteView"+a.level).addClass("ui-state-disabled")):($("li#menusaveView"+a.level).removeClass("ui-state-disabled"),$("li#menudeleteView"+a.level).removeClass("ui-state-disabled"))};a.updateTrackNumber=function(b,d){$("td.ind",$("table#trackListTbl"+a.level)).each(function(b){var c='<img src="'+iconPath+'grab_flat.png" style="cursor: move; cursor: -webkit-grab; cursor: -moz-grab; " class="handle'+
a.level+'">    ';$(this).html(c+(b+1))});d3.select("table#trackListTbl"+a.level).select("tbody").selectAll("tr").attr("class",function(a,b){return 0===b%2?"even":"odd"});var c=a.findSelectedView();a.generatePreview(c)};a.generateSettingsString=function(b){var d="";d3.select("table#trackListTbl"+a.level).select("tbody").selectAll("tr").each(function(a){d=d+a.TrackClass+","+a.Settings+";"});return d};a.generateSettingStringFromUI=function(){return a.previewSVG.generateSettingsString()};a.getViewData=
function(){var b=contextPath+"/"+pathPrefix;pathPrefix||(b="");$.ajax({url:b+"getBrowserViews.jsp",type:"GET",data:{genomeVer:genomeVer},dataType:"json",success:function(b){a.viewList=[];for(var c=0;c<b.length;c++)if("AA"===b[c].Organism||b[c].Organism===a.curOrg){for(var d=0,f=0;f<b[c].TrackList.length;f++){var h=b[c].TrackList[f];"AA"!==h.Organism&&h.Organism!==a.curOrg||d++}b[c].orgCount=d;a.viewList.push(b[c])}trackInfo&&a.readCookieViews();a.generateViewList();0===a.initialized&&0===a.level?
setTimeout(function(){a.initialized=1;a.applySelectedView($("#defaultView").val())},500):1===a.level&&(a.initialized=1,a.applySelectedView(svgViewIDList[a.level]));ga&&ga("send","event","BrowserViews","getViews")},error:function(a,b,e){}})};a.readCookieViews=function(){var b="";if(!0===isLocalStorage()){var d=localStorage.getItem("phenogenCustomViews");d&&(b=d)}else $.cookie("phenogenCustomViews")&&(b=$.cookie("phenogenCustomViews"));if(b&&-1<b.indexOf("<///>"))for(b=b.split("<///>"),d=0;d<b.length;d++){var c=
b[d].split("</>"),e={};for(g=0;g<c.length;g++){var f=c[g].split("=");if("TrackSettingList"===f[0]){f=f[1].split(";");e.TrackList=[];for(var h=0;h<f.length;h++)if(0<f[h].length){var l=f[h].substr(0,f[h].indexOf(",")),n=f[h].substr(f[h].indexOf(",")+1),k={};k.TrackClass=l;k.Settings=n;k.Order=h;e.TrackList.push(k)}}else 2>=f.length?e[f[0]]=f[1]:2<f.length&&(f=c[g].substr(0,c[g].indexOf("=")),h=c[g].substr(c[g].indexOf("=")+1),e[f]=h)}e.Source="local";if(3<c.length){for(var g=c=0;g<e.TrackList.length;g++){if(f=
trackInfo[e.TrackList[g].TrackClass])e.TrackList[g].TrackID=f.TrackID,e.TrackList[g].UserID=f.UserID,e.TrackList[g].Name=f.Name,e.TrackList[g].Description=f.Description,e.TrackList[g].Organism=f.Organism,e.TrackList[g].Controls=f.Controls;f=e.TrackList[g];"AA"!==f.Organism&&f.Organism!==a.curOrg||c++}e.orgCount=c;a.viewList.push(e)}}};a.generateSettingStringFromView=function(a){var b="";a=a.TrackList;if("undefined"!==typeof a)for(var c=0;c<a.length;c++)b=b+a[c].TrackClass+","+a[c].Settings+";";return b};
a.selectChange=function(){var b="",d=a.findSelectedView();"AA"!==d.Organism&&("RN"===d.Organism?b="<BR><BR>Available for Rat Only":"MM"===d.Organism&&(b="<BR><BR>Available for Mouse Only"));0===d.UserID?$("#deleteView"+a.level).hide():$("#deleteView"+a.level).show();$("div#descOuter"+a.level+" div#descContent").html(d.Description+b);a.generateTrackList(d);a.generatePreview(d);$(".trackLevel"+a.level).is(":visible")&&trackMenu[a.level].generateTrackTable();$("#trackSettingDialog").hide()};a.setSelectedView=
function(b){$("#viewTypeSelect"+a.level).val("all");a.generateViewList();b=a.findDisplayedIndex(b);$("#viewSelect"+a.level).prop("selectedIndex",b)};a.findSelectedView=function(){for(var b=$("#viewSelect"+a.level).val(),d=NaN,c=0;c<a.viewList.length&&isNaN(d);c++)a.viewList[c].ViewID===b&&(d=a.viewList[c]);return d};a.findViewWithID=function(b){for(var d=NaN,c=0;c<a.viewList.length&&isNaN(d);c++)a.viewList[c].ViewID===b&&(d=a.viewList[c]);return d};a.findViewIndexByID=function(b){for(var d=NaN,c=
0;c<a.viewList.length&&isNaN(d);c++)a.viewList[c].ViewID===b&&(d=c);return d};a.findSelectedViewIndex=function(){for(var b=$("#viewSelect"+a.level).val(),d=NaN,c=0;c<a.viewList.length&&isNaN(d);c++)a.viewList[c].ViewID===b&&(d=c);return d};a.findDisplayedIndex=function(b){for(var d=NaN,c=0;c<a.filterList.length&&isNaN(d);c++)a.filterList[c].ViewID===b&&(d=c);return d};a.findTrackByClass=function(b,d){for(var c=a.findViewWithID(d).TrackList,e=NaN,f=0;f<c.length&&isNaN(e);f++)c[f].TrackClass===b&&(e=
c[f]);return e};a.findTrack=function(b){for(var d=a.findSelectedView().TrackList,c=NaN,e=0;e<d.length&&isNaN(c);e++)d[e].TrackID===b&&(c=d[e]);return c};a.findTrackIndex=function(b){var d=a.findSelectedView().TrackList,c=NaN;if("undefined"!==typeof d)for(var e=0;e<d.length&&isNaN(c);e++)d[e].TrackID===b&&(c=e);return c};a.findTrackIndexWithViewID=function(b,d){for(var c=a.findViewWithID(d).TrackList,e=NaN,f=0;f<c.length&&isNaN(e);f++)c[f].TrackID===b&&(e=f);return e};a.setupControls=function(){-1<
m&&($(".control"+a.level+"#addTrack"+a.level).on("click",function(){if($(".trackLevel"+a.level).is(":visible"))$(".trackLevel"+a.level).fadeOut("fast");else{var b=$("div.viewsLevel"+a.level).position(),d=0;1200<=$(window).width()&&(d=-601);trackMenu[a.level].standalone=!1;$(".trackLevel"+a.level).css("top",b.top).css("left",b.left+d);b=a.findSelectedView();$(".trackLevel"+a.level+" span#selectedViewName").html(b.Name);$(".trackLevel"+a.level).fadeIn("fast");$("div#selectTrack"+a.level).show();$("div#addUsrTrack"+
a.level).hide();$("div#addUsrTrack"+a.level).hide();$("div#deleteUsrTrack"+a.level).hide();setTimeout(function(){trackMenu[a.level].generateTrackTable()},250)}}).on("mouseover",function(){$("#controlInfo"+a.level).html("Click to add a track to the current view.")}).on("mouseout",function(){$("#controlInfo"+a.level).html("")}),$(".control"+a.level+"#addView"+a.level).on("click",function(){$("div#nameView"+a.level).show();$("div#selection"+a.level).hide();$("span#viewMenuLbl"+a.level).text("Create View");
$("input#createType"+a.level).val("blank");$("input#function"+a.level).val("create")}).on("mouseover",function(){$("#topcontrolInfo"+a.level).html("Click to create a new view with no tracks.")}).on("mouseout",function(){$("#topcontrolInfo"+a.level).html("")}),$(".control"+a.level+"#copyView"+a.level).on("click",function(){$("div#nameView"+a.level).show();$("div#selection"+a.level).hide();$("span#viewMenuLbl"+a.level).text("Create View");$("input#createType"+a.level).val("copy");$("input#function"+
a.level).val("create")}).on("mouseover",function(){$("#topcontrolInfo"+a.level).html("Click to create a new view copied from the selected view.")}).on("mouseout",function(){$("#topcontrolInfo"+a.level).html("")}),$(".control"+a.level+"#saveView"+a.level).on("click",function(){var b=a.findSelectedView();0===b.UserID?($("#predefinedSaveAs"+a.level).show(),a.saveAsView(b,a.previewSVG)):a.saveView(b.ViewID,a.previewSVG,!1)}).on("mouseover",function(){$("#topcontrolInfo"+a.level).html("Click to save changes to the currently selected view.")}).on("mouseout",
function(){$("#topcontrolInfo"+a.level).html("")}),$(".control"+a.level+"#deleteView"+a.level).on("click",function(){var b=a.findSelectedViewIndex();a.confirmDeleteView(a.viewList[b])}).on("mouseover",function(){$("#topcontrolInfo"+a.level).html("Click to delete current view.")}).on("mouseout",function(){$("#topcontrolInfo"+a.level).html("")}),$(".applyView"+a.level).on("click",function(){a.applyView()}),d3.select("#viewTypeSelect"+a.level).on("change",a.generateViewList).on("mouseover",function(){$("#topcontrolInfo"+
a.level).html("Change to filter the view list by category.")}).on("mouseout",function(){$("#topcontrolInfo"+a.level).html("")}))};a.generateViewList=function(){d3.select("#viewSelect"+a.level).html("");a.filterList=[];for(var b=$("#viewTypeSelect"+a.level).val(),d=0;d<a.viewList.length;d++)("all"===b||"predefined"===b&&0===a.viewList[d].UserID||"custom"===b&&0!==a.viewList[d].UserID)&&a.filterList.push(a.viewList[d]);d3.select("#viewSelect"+a.level).on("change",a.selectChange).on("mouseover",function(){$("#topcontrolInfo"+
a.level).html("Click on a view to select it and view preview/details.")}).on("mouseout",function(){$("#topcontrolInfo"+a.level).html("")}).selectAll("option").data(a.filterList).enter().append("option").attr("value",function(a){return a.ViewID}).text(function(a){var b=a.Name;b=0===a.UserID?b+"      (Predefined)":b+"     (Custom"+("local"===a.Source?" local":" server")+")";b=b+"     ("+a.orgCount+" tracks)";"AA"!==a.Organism&&("RN"===a.Organism?b+="      (Rat Only)":"MM"===a.Organism&&(b+="     (Mouse Only)"));
a.modified&&1===a.modified&&(b+="   (Modified)");return b})};a.addTrackToView=function(b){var d=a.findSelectedView(),c=a.findSelectedViewIndex();d.TrackList.push(b);a.generateTrackList(d);a.generatePreview(d);a.generateViewList();$("#viewSelect"+a.level).prop("selectedIndex",c);ga&&ga("send","event","BrowserViews","addTrackToView")};a.addTrackToViewWithID=function(b,d){var c=a.findViewWithID(b);c.TrackList.push(d);a.generateTrackList(c);a.generatePreview(c);a.generateViewList()};a.createNewView=function(){$("#predefinedSaveAs"+
a.level).hide();if(0<uid)if("create"===$("#function"+a.level).val()){var b=$("input#viewNameTxt"+a.level).val(),d=$("#viewDescTxt"+a.level).val(),c=$("input#createType"+a.level).val(),e=-1;"copy"===c&&(e=a.findSelectedView().ViewID);var f=contextPath+"/"+pathPrefix;pathPrefix||(f="");$.ajax({url:f+"createBrowserViews.jsp",type:"GET",cache:!1,data:{name:b,description:d,type:c,copyFrom:e,organism:organism},dataType:"json",success:function(b){a.getViewData();$("div#nameView"+a.level).hide();$("div#selection"+
a.level).show();$("span#viewMenuLbl"+a.level).html("Select/Edit Views")},error:function(a,b,c){console.log(c)},async:!1})}else"saveAs"===$("#function"+a.level).val()&&(b=$("input#viewNameTxt"+a.level).val(),d=$("#viewDescTxt"+a.level).val(),f=contextPath+"/"+pathPrefix,pathPrefix||(f=""),$.ajax({url:f+"createBrowserViews.jsp",type:"GET",cache:!1,data:{name:b,description:d,type:"blank",copyFrom:-1,organism:organism},dataType:"json",success:function(b){a.saveView(b.viewID,a.saveAsImg,!1);$("div#nameView"+
a.level).hide();$("div#selection"+a.level).show();$("span#viewMenuLbl"+a.level).html("Select/Edit Views")},error:function(a,b,c){console.log(c)},async:!1}));else{b=$("input#viewNameTxt"+a.level).val();d=$("#viewDescTxt"+a.level).val();c=$("input#createType"+a.level).val();e="";e=$.cookie("JSESSIONID");f=(new Date).getTime();e="ViewID="+(e+"_"+f)+"</>UserID=-999</>Name="+b+"</>Description="+d+"</>Organism="+organism.toUpperCase()+"</>imgSettings=displaySelect0=700;</>TrackSettingList=";if("saveAs"===
$("#function"+a.level).val())b=a.saveAsImg.generateSettingsString(),e+=b;else if("copy"===c){b="";d=a.findSelectedView().TrackList;for(c=0;c<d.length;c++)b=b+d[c].TrackClass+","+d[c].Settings+";";e+=b}e+="<///>";!0===isLocalStorage()?(b=localStorage.getItem("phenogenCustomViews"))?localStorage.setItem("phenogenCustomViews",b+e):localStorage.setItem("phenogenCustomViews",e):(b="",b=$.cookie("phenogenCustomViews")?$.cookie("phenogenCustomViews")+e:e,$.cookie("phenogenCustomViews",b));a.getViewData();
$("div#nameView"+a.level).hide();$("div#selection"+a.level).show();$("span#viewMenuLbl"+a.level).html("Select/Edit Views")}$("input#viewNameTxt"+a.level).val("");$("#viewDescTxt"+a.level).val("");$("input#createType"+a.level).val("blank");getMainViewData(1);ga&&ga("send","event","BrowserViews","createView")};a.saveView=function(b,d,c){if(0<uid){d=d.generateSettingsString();var e=contextPath+"/"+pathPrefix;pathPrefix||(e="");0<b&&$.ajax({url:e+"updateBrowserView.jsp",type:"GET",cache:!1,data:{viewID:b,
trackList:d},dataType:"json",success:function(b){a.getViewData()},error:function(a,b,c){console.log(c)},async:c})}else{c=e="";if(!0===isLocalStorage()){var f=localStorage.getItem("phenogenCustomViews");f&&(e=f)}else $.cookie("phenogenCustomViews")&&(e=$.cookie("phenogenCustomViews"));e=e.split("<///>");for(f=0;f<e.length;f++)if(10<e[f].length)if(-1<e[f].indexOf("ViewID="+b)){var h=e[f].substr(0,e[f].indexOf("</>TrackSettingList=")),l=d.generateSettingsString();c=c+h+"</>TrackSettingList="+l+"<///>"}else c=
c+e+"<///>";!0===isLocalStorage()?localStorage.setItem("phenogenCustomViews",c):$.cookie("phenogenCustomViews",c);a.getViewData()}getMainViewData(1);ga&&ga("send","event","BrowserViews","saveView")};a.saveAsView=function(b,d){a.saveAs=b;a.saveAsImg=d;$("div#nameView"+a.level).show();$("div#selection"+a.level).hide();$("span#viewMenuLbl"+a.level).text("Save As...");$("input#createType"+a.level).val("blank");$("input#function"+a.level).val("saveAs");ga&&ga("send","event","BrowserViews","saveAsView")};
a.confirmDeleteView=function(b){a.findSelectedView().ViewID!==b.ViewID&&a.setSelectedView(b.ViewID);0<b.UserID||-999===Number(b.UserID)?($("div#selection"+a.level).hide(),$("#deleteViewName"+a.level).html(b.Name+"    ("+b.orgCount+" tracks)"),$("#confirmDeleteView"+a.level).show()):$("#topcontrolInfo"+a.level).html("This is a predefined view, you may not delete it.")};a.cancelDeleteView=function(){$("#confirmDeleteView"+a.level).hide();$("div#selection"+a.level).show()};a.deleteView=function(){var b=
a.findSelectedViewIndex(),d=a.viewList[b];if("db"===d.Source){var c=contextPath+"/"+pathPrefix;pathPrefix||(c="");$.ajax({url:c+"deleteView.jsp",type:"GET",data:{viewID:d.ViewID},dataType:"json",cache:!1,success:function(c){"Deleted Successfully"===c.status&&(a.viewList.splice(b,1),a.generateViewList());$("#topcontrolInfo"+a.level).html(c.status)},error:function(b,c,d){console.log(d);$("#topcontrolInfo"+a.level).html("There was an error deleting this view.")},async:!0})}else{var e="";c="";if(!0===
isLocalStorage()){var f=localStorage.getItem("phenogenCustomViews");f&&(e=f)}else $.cookie("phenogenCustomViews")&&(e=$.cookie("phenogenCustomViews"));e=e.split("<///>");for(f=0;f<e.length;f++)-1<e[f].indexOf("ViewID="+d.ViewID)||10<e[f].length&&(c=c+e[f]+"<///>");!0===isLocalStorage()?localStorage.setItem("phenogenCustomViews",c):$.cookie("phenogenCustomViews",c);a.viewList.splice(b,1);a.generateViewList()}$("#confirmDeleteView"+a.level).hide();$("div#selection"+a.level).show();$("#viewSelect"+a.level).prop("selectedIndex",
0);a.selectChange();svgList[a.level].currentView.ViewID===d.ViewID&&a.applyView();getMainViewData(1);ga&&ga("send","event","BrowserViews","deleteView")};a.cancelView=function(){$("div#nameView"+a.level).hide();$("div#selection"+a.level).show();$("#predefinedSaveAs"+a.level).hide();$("span#viewMenuLbl"+a.level).html("Select/Edit Views")};a.getViewData();a.setupControls();return a};