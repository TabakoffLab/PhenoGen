var reportSelectedTrack=null,loadedTrackTable=null,regionDetailLoaded={};$(document).on("click","span.detailMenu",function(a){a=$(this).attr("name");var b=$("span.detailMenu.selected").attr("name");$("div#"+b).hide();$("span.detailMenu.selected").removeClass("selected");$("span[name='"+a+"']").addClass("selected");$("div#"+a).show();if("undefined"!==typeof svgList[0]){b=svgList[0].xScale.domain()[0];var c=svgList[0].xScale.domain()[1];loadRegionReport(a,chr,b,c)}});
function loadRegionReport(a,b,c,d){b=b+":"+c+"-"+d;"regionTable"===a&&(b=b+":"+reportSelectedTrack);regionDetailLoaded[a]&&regionDetailLoaded[a]===b?"regionWGCNAEQTL"===a&&""===$("div#regionWGCNAEQTL").html()&&loadRegionWGCNA():("regionTable"==a&&null!=reportSelectedTrack?loadTrackTable():"regionEQTLTable"==a?($("div#regionEQTLTable").html('<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>'),setTimeout(function(){loadEQTLTable()},750)):"regionWGCNAEQTL"==
a&&loadRegionWGCNA(),regionDetailLoaded[a]=b);"regionEQTLTable"===a&&tblFrom&&tblFrom.fnAdjustColumnSizing();ga&&ga("send","event","loadRegionReport",a)}
function loadTrackTable(){var a=svgList[0].xScale.domain()[0],b=svgList[0].xScale.domain()[1],c=chr+":"+minCoord+"-"+maxCoord+":"+reportSelectedTrack.trackClass;loadedTrackTable&&loadedTrackTable===c||(loadedTrackTable=c,c="",a={species:organism,minCoord:a,maxCoord:b,chromosome:chr,rnaDatasetID:rnaDatasetID,arrayTypeID:arrayTypeID,forwardPvalueCutoff:forwardPValueCutoff,folderName:regionfolderName,genomeVer:genomeVer,track:reportSelectedTrack.trackClass},-1<reportSelectedTrack.trackClass.indexOf("noncoding")?
(a.type="noncoding",a.source="ensembl",-1<reportSelectedTrack.trackClass.indexOf("brain")&&(a.source="brain"),c="web/GeneCentric/geneTable.jsp"):-1<reportSelectedTrack.trackClass.indexOf("coding")?(c="web/GeneCentric/geneTable.jsp",a.type="coding",a.source="ensembl",-1<reportSelectedTrack.trackClass.indexOf("brain")&&(a.source="brain")):"liverTotal"===reportSelectedTrack.trackClass||"heartTotal"===reportSelectedTrack.trackClass||"brainTotal"===reportSelectedTrack.trackClass||"mergedTotal"===reportSelectedTrack.trackClass?
(c="web/GeneCentric/geneTable.jsp",a.type="all",a.source="liver","heartTotal"===reportSelectedTrack.trackClass?a.source="heart":"brainTotal"===reportSelectedTrack.trackClass?a.source="brain":"mergedTotal"===reportSelectedTrack.trackClass&&(a.source="merged")):-1<reportSelectedTrack.trackClass.indexOf("smallnc")?(a.source="ensembl",-1<reportSelectedTrack.trackClass.indexOf("brain")?a.source="brain":-1<reportSelectedTrack.trackClass.indexOf("heart")&&(a.source="heart"),-1<reportSelectedTrack.trackClass.indexOf("liver")&&
(a.source="liver"),c="web/GeneCentric/smallGeneTable.jsp"):-1<(new String(reportSelectedTrack.trackClass)).indexOf("snp")||"qtl"===reportSelectedTrack.trackClass&&(c="web/GeneCentric/bqtlTable.jsp"),c&&loadDivWithPage("div#regionTable",c,!1,a,'<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>'));ga&&ga("send","event","loadTrackTable",reportSelectedTrack.trackClass)}
function loadEQTLTable(){var a=svgList[0].xScale.domain()[0],b=svgList[0].xScale.domain()[1];loadDivWithPage("div#regionEQTLTable","web/GeneCentric/regionEQTLTable.jsp",!1,{species:organism,minCoord:a,maxCoord:b,chromosome:chr,rnaDatasetID:rnaDatasetID,arrayTypeID:arrayTypeID,pValueCutoff:pValueCutoff,folderName:regionfolderName,genomeVer:genomeVer},'<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>');ga&&ga("send","event","loadEQTLTable","eQTLTable")}
function loadRegionWGCNA(){$("div#geneWGCNA").html("");var a=svgList[0].xScale.domain()[0],b=svgList[0].xScale.domain()[1];loadDivWithPage("div#regionWGCNAEQTL","web/GeneCentric/wgcnaGene.jsp",!0,{region:chr+":"+a+"-"+b},'<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>');ga&&ga("send","event","loadWGCNA","wgcna")}
function loadEQTLTableWParams(a,b,c,d){loadDivWithPage("div#regionEQTLTable","web/GeneCentric/regionEQTLTable.jsp",!1,{species:organism,minCoord:minCoord,maxCoord:maxCoord,chromosome:chr,rnaDatasetID:rnaDatasetID,arrayTypeID:arrayTypeID,pValueCutoff:d,tissues:c,chromosomes:b,levels:a,folderName:regionfolderName},'<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>');ga&&ga("send","event","loadEQTLTableWParams","eqtlwparams")}
function loadDivWithPage(a,b,c,d,e){$(a).html(e);$.ajax({url:b,type:"GET",cache:!1,data:d,dataType:"html",success:function(b){$(a).html(b);c&&setTimeout(function(){$("html, body").animate({scrollTop:$(a).offset().top},200)},300)},error:function(b,c,d){$(a).html('<span style="color:#FF0000;">An error occurred generating this page.  Please try back later.</span>')}})}function trKey(a){var b="";a&&(b=a.trackClass);return b}
function DisplayRegionReport(){if(0<d3.select("#collapsableReportList").size()){var a=svgList[0].trackList;if(reportSelectedTrack)for(var b=0;b<a.length&&!reportSelectedTrack;b++)a[b]&&a[b].getDisplayedData&&(reportSelectedTrack=a[b]);a=d3.select("#collapsableReportList").selectAll("li.report").data(a,trKey).html(function(a){var b="";a&&a.getDisplayedData&&(b=a.getDisplayedData(),b=a.label+": "+b.length);return b});a.enter().append("li").attr("class",function(a){return a?"report "+a.trackClass:"report"}).html(function(a){var b=
"";a&&a.getDisplayedData&&(b=a.getDisplayedData(),b=a.label+": "+b.length);return b}).on("click",displayDetailedView);a.exit().remove();!$("div#collapsableReport").is(":hidden")&&reportSelectedTrack&&displayDetailedView(reportSelectedTrack)}a=$("span.detailMenu.selected").attr("name");b=svgList[0].xScale.domain()[0];var c=svgList[0].xScale.domain()[1];loadRegionReport(a,chr,b,c);ga&&ga("send","event","loadRegionReport","regionReport")}
function displayDetailedView(a){reportSelectedTrack=a;$("li.report").removeClass("selected");$("li."+a.trackClass).addClass("selected");a.displayBreakDown&&setTimeout(function(){$("div#trackGraph").html("");a.displayBreakDown("div#collapsableReport div#trackGraph")},50);var b=new String(a.trackClass);-1<b.indexOf("coding")||-1<b.indexOf("noncoding")||-1<b.indexOf("smallnc")||-1<b.indexOf("liverTotal")||-1<b.indexOf("heartTotal")||-1<b.indexOf("brainTotal")||-1<b.indexOf("mergedTotal")||"qtl"==b?($("#regionTableSubHeader").show(),
$("#regionTable").show()):($("#regionTableSubHeader").hide(),$("#regionTable").hide());$("div#regionTable").is(":hidden")||loadTrackTable();ga&&ga("send","event","loaddetailedView",a)}function DisplaySelectedDetailReport(a,b){loadDivWithPage("div#selectedReport",a,!1,b,'<span style="text-align:center;width:100%;"><img src="web/images/ucsc-loading.gif"><BR>Loading...</span>')};